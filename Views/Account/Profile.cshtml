@{
    ViewData["Title"] = "Profile";
}

@model PemitManagement.ViewModels.Profile.ProfileViewModel
<link rel="stylesheet" href="~/css/permits.css" />
<link rel="stylesheet" href="~/css/profile.css" />

<div class="page-header text-center mb-3">
    <h2>My Profile</h2>
    <p class="text-muted">View account details, permissions and security information</p>
</div>

<div class="row g-4">

    <!-- PROFILE INFO -->
    <div class="col-md-6">
        <div class="card info-card interactive h-100">
            <div class="card-header bg-primary text-white">
                Profile Information
            </div>

            <div class="card-body">
                <div class="info-row"><span>Employee ID</span><strong>@Model.EmpNo</strong></div>
                <div class="info-row"><span>Name</span><strong>@Model.Name</strong></div>
                @* <div class="info-row"><span>Department</span><strong>@Model.Department</strong></div>
                <div class="info-row"><span>Designation</span><strong>@Model.Designation</strong></div> *@
                <div class="info-row"><span>Email</span><strong>@Model.Email</strong></div>
                <div class="info-row"><span>Account Created</span><strong>@Model.CreatedAt.ToString("dd MMM yyyy")</strong></div>
                <div class="info-row"><span>Last Updated</span><strong>@Model.UpdatedAt.ToString("dd MMM yyyy")</strong></div>
                <div class="info-row"><span>Last Login</span><strong>@Model.LastLogin</strong></div>
            </div>
        </div>
    </div>

    <!-- PERMISSIONS -->
    <div class="col-md-6">
        <div class="card info-card interactive h-100">
            <div class="card-header bg-dark text-white">
                Permissions
            </div>

            <div class="card-body permission-list">
                <ul class="list-group list-group-flush">
                    @foreach (var p in Model.Permissions)
                    {
                        <li class="list-group-item d-flex justify-content-between align-items-center permission-item @(p.HasPermission ? "granted" : "denied")">
                            <span>@p.DisplayName</span>

                            @if (p.HasPermission)
                            {
                                <span class="badge bg-success">✔</span>
                            }
                            else
                            {
                                <span class="badge bg-secondary">✖</span>
                            }
                        </li>
                    }
                </ul>
            </div>
        </div>
    </div>
</div>

<div class="row g-4 mt-2">

    <!-- SECURITY TIPS -->

    <div class="col-md-6">
        <div class="card info-card security-card interactive h-100">
            <div class="card-header bg-info text-dark">
                Security Tips
            </div>

            <div class="card-body">
                <ul class="security-tips">
                    <li>Use a strong password with letters, numbers, and symbols.</li>
                    <li>Change your password regularly.</li>
                    <li>Never share your login credentials.</li>
                    <li>Log out when finished using the system.</li>
                </ul>
            </div>
        </div>
    </div>


    <!-- CHANGE PASSWORD -->
    <div class="col-md-6">
        <div class="card info-card interactive h-100">
            <div class="card-header bg-warning text-dark">
                Change Password
            </div>

            <div class="card-body">
                <form asp-action="ChangePassword" method="post">
                    @Html.AntiForgeryToken()

                    <div class="mb-2">
                        <label>Current Password</label>
                        <input type="password" name="CurrentPassword" class="form-control" />
                    </div>

                    <div class="mb-2">
                        <label>New Password</label>
                        <input type="password" name="NewPassword" class="form-control" />
                    </div>

                    <div class="mb-3">
                        <label>Confirm New Password</label>
                        <input type="password" name="ConfirmPassword" class="form-control" />
                    </div>

                    <button class="btn btn-orange">Update Password</button>
                </form>
            </div>
        </div>
    </div>
</div>